import{_ as C}from"./BClogo-c299679b.js";import{g as B,h as b,i as w,r as l,o as I,c as S,a as p,b as e,w as a,d as m,j as F,E as u,p as L,f as N,k as A,_ as M}from"./index-0b685335.js";const R=n=>(L("data-v-15eb30c7"),n=n(),N(),n),T={class:"shell"},q={class:"BCLogo",style:{"padding-top":"5%"}},U=R(()=>p("img",{style:{width:"100px"},src:C},null,-1)),$={style:{"font-size":"60px",color:"#fefefe","text-shadow":"0 0 0.5em #00ffff, 0 0 0.2em #5c5c5c"},class:"BCName"},j=B({__name:"AdminLogin",setup(n){const _=A;b("default");const f=b(),s=w({email:"",password:""}),y=w({email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),h=()=>{u({message:"管理员登录成功, 正在跳转.",type:"success"}),setTimeout(()=>{_.push("/adminpage")},3e3)},k=()=>{u({message:"登录失败, 请重新尝试.",type:"error"})},v=async r=>{if(!r)return console.error("错误");await r.validate((o,c)=>{o?F.post("admin/login",{email:s.email,password:s.password}).then(function(t){t.data.code==2003&&t.data.result.token!=null?(localStorage.setItem("token",t.data.result.token),localStorage.setItem("role","admin"),h()):(k(),r.resetFields())}).catch(function(t){console.log(t)}):console.log("error submit!",c)})},x=()=>{u({message:"正在前往管理员身份获取.",type:"success"}),setTimeout(()=>{_.push("/adminregister")},2e3)};return(r,o)=>{const c=l("router-link"),t=l("el-input"),d=l("el-form-item"),g=l("el-button"),V=l("el-form");return I(),S("div",T,[p("div",q,[U,p("div",$,[e(c,{to:"/",class:"toIndex"},{default:a(()=>[m("BlockChain Studio 208")]),_:1})])]),e(V,{ref_key:"ruleFormRef",ref:f,model:s,rules:y,"label-width":"150px",class:"applicationForm","status-icon":"","label-position":"left"},{default:a(()=>[e(d,{label:"邮箱",prop:"email"},{default:a(()=>[e(t,{modelValue:s.email,"onUpdate:modelValue":o[0]||(o[0]=i=>s.email=i)},null,8,["modelValue"])]),_:1}),e(d,{label:"密码:",prop:"password"},{default:a(()=>[e(t,{modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=i=>s.password=i)},null,8,["modelValue"])]),_:1}),e(d,{class:"submitButton"},{default:a(()=>[e(g,{type:"primary",onClick:o[2]||(o[2]=i=>v(f.value))},{default:a(()=>[m(" 登录 ")]),_:1}),e(g,{type:"primary",onClick:x},{default:a(()=>[m(" 管理员身份获取 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}});const D=M(j,[["__scopeId","data-v-15eb30c7"]]);export{D as default};
