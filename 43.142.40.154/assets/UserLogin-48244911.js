import{_ as B}from"./BClogo-c299679b.js";import{g as I,h as y,i as b,r as l,o as S,c as F,a as f,b as e,w as o,d as c,j as L,E as u,p as U,f as N,k as T,_ as M}from"./index-0b685335.js";const R=r=>(U("data-v-12ab0549"),r=r(),N(),r),q={class:"shell"},$={class:"BCLogo",style:{"padding-top":"5%"}},j=R(()=>f("img",{style:{width:"100px"},src:B},null,-1)),z={style:{"font-size":"60px",color:"#fefefe","text-shadow":"0 0 0.5em #00ffff, 0 0 0.2em #5c5c5c"},class:"BCName"},A=I({__name:"UserLogin",setup(r){const d=T;y("default");const g=y(),a=b({email:"",password:""}),w=b({email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),h=()=>{u({message:"登录成功, 正在跳转.",type:"success"}),setTimeout(()=>{d.push("/userpage")},3e3)},k=()=>{u({message:"登录失败, 请重新尝试.",type:"error"})},v=async n=>{if(!n)return console.error("错误");await n.validate((s,p)=>{s?L.post("bc208/login",{email:a.email,password:a.password}).then(function(t){t.data.code==2003&&t.data.result.token!=null?(localStorage.setItem("token",t.data.result.token),localStorage.setItem("role","user"),h()):(k(),n.resetFields())}).catch(function(t){console.log(t)}):console.log("error submit!",p)})},x=()=>{u({message:"前往注册页面, 正在跳转.",type:"success"}),setTimeout(()=>{d.push("/register")},1e3)},C=()=>{u({message:"前往管理员页面, 正在跳转.",type:"success"}),setTimeout(()=>{d.push("/adminlogin")},1e3)};return(n,s)=>{const p=l("router-link"),t=l("el-input"),m=l("el-form-item"),_=l("el-button"),V=l("el-form");return S(),F("div",q,[f("div",$,[j,f("div",z,[e(p,{to:"/",class:"toIndex"},{default:o(()=>[c("BlockChain Studio 208")]),_:1})])]),e(V,{ref_key:"ruleFormRef",ref:g,model:a,rules:w,"label-width":"150px",class:"applicationForm","status-icon":"","label-position":"left"},{default:o(()=>[e(m,{label:"邮箱",prop:"email"},{default:o(()=>[e(t,{modelValue:a.email,"onUpdate:modelValue":s[0]||(s[0]=i=>a.email=i)},null,8,["modelValue"])]),_:1}),e(m,{label:"密码:",prop:"password"},{default:o(()=>[e(t,{modelValue:a.password,"onUpdate:modelValue":s[1]||(s[1]=i=>a.password=i)},null,8,["modelValue"])]),_:1}),e(m,{class:"submitButton"},{default:o(()=>[e(_,{type:"primary",onClick:s[2]||(s[2]=i=>v(g.value))},{default:o(()=>[c(" 登录 ")]),_:1}),e(_,{type:"primary",onClick:x},{default:o(()=>[c(" 注册 ")]),_:1}),e(_,{type:"primary",onClick:C},{default:o(()=>[c(" 管理员 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}});const G=M(A,[["__scopeId","data-v-12ab0549"]]);export{G as default};
